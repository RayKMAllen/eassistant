{
  "id": "T0",
  "name": "Conversational Email Assistant",
  "description": "Top-level project epic. This file tracks all tasks required to deliver the MVP and the subsequent architectural refactor.",
  "definition_of_done": "All M0-M13 milestones are complete and their respective acceptance criteria are met.",
  "tasks": [
    {
      "id": "M0",
      "name": "Milestone 0: Bootstrap",
      "status": "done"
    },
    {
      "id": "M1",
      "name": "Milestone 1: Core Pipeline (Text)",
      "status": "done"
    },
    {
      "id": "M2",
      "name": "Milestone 2: Features & UX",
      "status": "done"
    },
    {
      "id": "M3",
      "name": "Milestone 3: Polishing & Testing",
      "status": "done"
    },
    {
      "id": "M4",
      "name": "Milestone 4: Feature Enhancements",
      "status": "done"
    },
    {
      "id": "M5",
      "name": "Milestone 5: Conversational File Loading",
      "status": "done"
    },
    {
      "id": "M6",
      "name": "Milestone 6: Finalization & Verification",
      "status": "done"
    },
    {
      "id": "M7",
      "name": "Milestone 7: Bugfix - Conversational Cloud Save",
      "status": "done"
    },
    {
      "id": "M8",
      "name": "Milestone 8: Submission Preparation",
      "status": "done"
    },
    {
      "id": "M9",
      "name": "Milestone 9: Web Application & API",
      "status": "done"
    },
    {
      "id": "M10",
      "name": "Milestone 10: UI/API Integration & Testing",
      "status": "done"
    },
    {
      "id": "M11",
      "name": "Milestone 11: Refactor - Database & State Persistence",
      "dependencies": [
        "M10"
      ],
      "definition_of_done": "The core database layer is established, and conversational state is persisted between requests.",
      "status": "todo",
      "tasks": [
        {
          "id": "M11.1",
          "desc": "DB: Define Schema & Service",
          "deps": [],
          "dod": [
            "A `DatabaseService` module is created.",
            "SQLAlchemy Core is used for schema definition.",
            "Tables for `users`, `sessions`, `graph_state`, and `messages` are defined.",
            "The service works with a local SQLite database."
          ],
          "status": "todo"
        },
        {
          "id": "M11.2",
          "desc": "API: Integrate State Management",
          "deps": [
            "M11.1"
          ],
          "dod": [
            "FastAPI endpoint loads/creates a session on each request.",
            "The latest `graph_state` is retrieved from the database before running the graph.",
            "The updated `graph_state` and new messages are saved to the database after the graph runs."
          ],
          "status": "todo"
        },
        {
          "id": "M11.3",
          "desc": "API: Basic User/Session Handling",
          "deps": [
            "M11.2"
          ],
          "dod": [
            "A mechanism exists to identify a user (e.g., from a static header).",
            "The user is associated with the correct session in the database."
          ],
          "status": "todo"
        },
        {
          "id": "M11.4",
          "desc": "Tests: Update Integration Tests for DB Persistence",
          "deps": [
            "M11.3"
          ],
          "dod": [
            "Integration tests are refactored to use a test database (e.g., in-memory SQLite).",
            "Tests now set up state in the DB, run the API, and assert on the final DB state."
          ],
          "status": "todo"
        }
      ]
    },
    {
      "id": "M12",
      "name": "Milestone 12: Refactor - S3 Usage & Repositories",
      "dependencies": [
        "M11"
      ],
      "definition_of_done": "S3 is used strictly for artifact storage, with all metadata managed in the database.",
      "status": "todo",
      "tasks": [
        {
          "id": "M12.1",
          "desc": "Refactor StorageService to ArtifactRepository",
          "deps": [],
          "dod": [
            "The `StorageService` is renamed/refactored to `ArtifactRepository` to clarify its purpose.",
            "All file-saving operations (e.g., `save_draft` node) use this repository."
          ],
          "status": "todo"
        },
        {
          "id": "M12.2",
          "desc": "DB: Link Artifacts to Database",
          "deps": [
            "M11.1",
            "M12.1"
          ],
          "dod": [
            "An `artifacts` table is created in the database to store metadata (path, type, session_id).",
            "The `ArtifactRepository` writes a record to this table after successfully uploading a file to S3."
          ],
          "status": "todo"
        }
      ]
    },
    {
      "id": "M13",
      "name": "Milestone 13: Optional Enhancements",
      "dependencies": [
        "M12"
      ],
      "definition_of_done": "Value-add features leveraging the new architecture are implemented.",
      "status": "todo",
      "tasks": [
        {
          "id": "M13.1",
          "desc": "Implement Conversation Summarization",
          "deps": [],
          "dod": [
            "A `summary` field is added to the `sessions` table.",
            "A node or background task is created to periodically summarize conversation history and update the session summary."
          ],
          "status": "todo"
        },
        {
          "id": "M13.2",
          "desc": "Scaffold RAG Layer (Future)",
          "deps": [],
          "dod": [
            "Placeholder modules or documentation are created outlining a future RAG implementation.",
            "No functional code is required for this task."
          ],
          "status": "todo"
        }
      ]
    }
  ]
}